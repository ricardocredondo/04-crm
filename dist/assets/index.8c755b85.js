import{j as N,u as $,L as C,O as F,a as v,r as p,c as L,b as g,d as O,F as I,e as A,f as b,g as j,B as R,R as P,h as y,i as D,k as M}from"./vendor.272e4f00.js";const q=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))d(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&d(l)}).observe(document,{childList:!0,subtree:!0});function i(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerpolicy&&(n.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?n.credentials="include":a.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function d(a){if(a.ep)return;a.ep=!0;const n=i(a);fetch(a.href,n)}};q();const e=N.exports.jsx,s=N.exports.jsxs,f=N.exports.Fragment,B=()=>{const{pathname:t}=$();return s("div",{className:"md:flex md:min-h-screen",children:[s("div",{className:"md:w-1/4 px-3 py-5 bg-blue-900",children:[e("h2",{className:" text-4xl font-black text-center text-white",children:"CRM - CLIENTES"}),s("nav",{className:"mt-10",children:[e(C,{to:"/clientes",className:`${t==="/clientes"?"text-blue-300":"text-white"} block text-2xl  hover:bg-blue-300`,children:"Clientes"}),e(C,{to:"/clientes/nuevo",className:`${t==="/clientes/nuevo"?"text-blue-300":"text-white"} block text-2xl hover:bg-blue-300`,children:"Nuevo Cliente"})]})]}),e("div",{className:"md:w-3/4 md:h-screen px-8 py-5 overflow-y-scroll",children:e(F,{})})]})},z=()=>{const t=Math.random().toString(36).substring(2),r=Date.now().toString(36);return t+r},V=({cliente:t,handleEliminar:r})=>{const{nombre:i,empresa:d,email:a,telefono:n,notas:l,id:m}=t,h=v();return s("tr",{className:"text-center border-b hover:bg-gray-100",children:[e("td",{className:"py-8 text-gray-500",children:i}),s("td",{className:"py-8 text-gray-500",children:[s("p",{className:"m-0 mx-auto",children:[e("span",{className:"text-gray-800 uppercase font-bold",children:"Email:"}),a]}),s("p",{className:"m-0 mx-auto",children:[e("span",{className:"text-gray-800 uppercase font-bold",children:"Telefono:"}),n]})]}),e("td",{className:"py-8 text-gray-500",children:d}),s("td",{className:"py-8",children:[e("button",{type:"button",className:"mr-3 py-1 px-4 bg-green-700 text-white text-xs uppercase rounded-sm hover:bg-green-800",onClick:()=>h(`/clientes/${m}`),children:"Ver"}),e("button",{type:"button",className:"mr-3 py-1 px-4 bg-blue-500 text-white text-xs uppercase rounded-sm hover:bg-blue-600",onClick:()=>h(`/clientes/editar/${m}`),children:"Editar"}),e("button",{type:"button",className:"py-1 px-4 bg-red-500 text-white text-xs uppercase rounded-sm hover:bg-red-600",onClick:()=>r(m,i),children:"Eliminar"})]})]})};const w=()=>s("div",{className:"spinner",children:[e("div",{className:"dot1"}),e("div",{className:"dot2"})]}),J=({cargando:t,setCargando:r})=>{const[i,d]=p.exports.useState([]),a=v();p.exports.useEffect(()=>{r(!t),(async()=>{try{const u=await(await fetch("https://my-json-server.typicode.com/ricardocredondo/04-crm/clientes")).json();d(u)}catch(m){console.log(m)}r(!1)})()},[]);const n=async(l,m)=>{if(confirm(`\xBFDeseas eliminar a ${m}?`))try{const u=`https://my-json-server.typicode.com/ricardocredondo/04-crm/clientes/${l}`;await fetch(u,{method:"DELETE"});const c=i.filter(o=>o.id!==l);d(c),a("/clientes")}catch(u){console.log(u)}};return s(f,{children:[e("h1",{className:"font-black text-4xl text-blue-900",children:"Clientes"}),e("p",{className:"mt-5",children:"Administra tus clientes"}),t?e(w,{}):s("table",{className:"w-full mt-5 table-auto shadow bg-white",children:[e("thead",{className:"bg-blue-800 text-white",children:s("tr",{children:[e("th",{className:"p-2",children:"Nombre"}),e("th",{className:"p-2",children:"Contacto"}),e("th",{className:"p-2",children:"Empresa"}),e("th",{className:"p-2",children:"Acciones"})]})}),e("tbody",{children:i.map(l=>e(V,{cliente:l,handleEliminar:n},z()))})]})]})},x=({children:t})=>e("div",{className:"mt-4 py-3 text-white font-bold text-center bg-red-500",children:t}),E=({clienteTemporal:t,setClienteTemporal:r})=>{var n,l,m,h,u;const i=v(),d=L().shape({nombre:g().min(3,"El nombre es demasiado corto").max(20,"El nombre es muy largo").required("El nombre del cliente es obligatorio"),empresa:g().min(2,"El nombre de la empresa es muy corto").max(20,"El nombre de la empresa es muy largo").required("La empresa del cliente es obligatoria"),email:g().email("No es un email valido").required("El email es obligatorio"),telefono:O().integer("Numero no valido").positive("Numero no valido").typeError("El numero no es valido")}),a=async c=>{try{if(t.id){const o=`https://my-json-server.typicode.com/ricardocredondo/04-crm/clientes/${t.id}`;await fetch(o,{method:"PUT",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}),r({})}else await fetch("https://my-json-server.typicode.com/ricardocredondo/04-crm/clientes",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}});i("/clientes")}catch(o){console.log(o)}};return s("div",{className:"md:w-3/4 mt-8 p-10 bg-white rounded-md shadow-md mx-auto",children:[e("h1",{className:"text-gray-600 font-bold text-2xl text-center  uppercase",children:(t==null?void 0:t.nombre)?"Editar Cliente":"Agregar Cliente"}),e(I,{initialValues:{nombre:(n=t==null?void 0:t.nombre)!=null?n:"",empresa:(l=t==null?void 0:t.empresa)!=null?l:"",email:(m=t==null?void 0:t.email)!=null?m:"",telefono:(h=t==null?void 0:t.telefono)!=null?h:"",notas:(u=t==null?void 0:t.notas)!=null?u:""},enableReinitialize:!0,onSubmit:async(c,{resetForm:o})=>{await a(c),o()},validationSchema:d,children:({errors:c,touched:o})=>s(A,{className:"mt-10",children:[s("div",{className:"mb-8",children:[e("label",{htmlFor:"nombre",className:"text-gray-600",children:"Nombre:"}),e(b,{type:"text",id:"nombre",className:"block w-full mt-2 p-3 bg-gray-100",placeholder:"Nombre del cliente",name:"nombre"}),c.nombre&&o.nombre?e(x,{children:c.nombre}):null]}),s("div",{className:"mb-8",children:[e("label",{htmlFor:"empresa",className:"text-gray-600",children:"Empresa:"}),e(b,{type:"text",id:"empresa",className:"block w-full mt-2 p-3 bg-gray-100",placeholder:"Empresa del cliente",name:"empresa"}),c.empresa&&o.empresa?e(x,{children:c.empresa}):null]}),s("div",{className:"mb-8",children:[e("label",{htmlFor:"email",className:"text-gray-600",children:"Email:"}),e(b,{type:"email",id:"email",className:"block w-full mt-2 p-3 bg-gray-100",placeholder:"Email del cliente",name:"email"}),c.email&&o.email?e(x,{children:c.email}):null]}),s("div",{className:"mb-8",children:[e("label",{htmlFor:"telefono",className:"text-gray-600",children:"Telefono:"}),e(b,{type:"tel",id:"telefono",className:"block w-full mt-2 p-3 bg-gray-100",placeholder:"Telefono del cliente",name:"telefono"}),c.telefono&&o.telefono?e(x,{children:c.telefono}):null]}),s("div",{className:"mb-12",children:[e("label",{htmlFor:"notas",children:"Notas:"}),e(b,{as:"textarea",id:"notas",className:"block w-full h-40 mt-2 p-3 bg-gray-100 resize-none",placeholder:"Notas",name:"notas"})]}),e("input",{type:"submit",value:(t==null?void 0:t.nombre)?"Guardar Cambios":"Agregar Cliente",className:"w-full p-3 text-lg text-white font-bold uppercase bg-blue-800 cursor-pointer"})]})})]})};E.defaultProps={clienteTemporal:{},cargando:!1};const k=()=>e("div",{children:e("p",{className:"w-2/4 mt-10 mx-auto py-5 bg-red-500 text-2xl text-white font-bold text-center uppercase rounded-md shadow-md",children:"No hay Clientes"})}),G=({cargando:t,setCargando:r})=>{const[i,d]=p.exports.useState({}),{id:a}=j();return p.exports.useEffect(()=>{r(!t),(async()=>{try{const l=`https://my-json-server.typicode.com/ricardocredondo/04-crm/clientes/${a}`,h=await(await fetch(l)).json();d(h),console.log(h)}catch(l){console.log(l)}r(!1)})()},[]),s(f,{children:[e("h1",{className:"font-black text-4xl text-blue-900",children:"Editar Cliente"}),t?e(w,{}):Object.keys(i).length===0?e(k,{}):s(f,{children:[e("p",{className:"mt-5",children:"Edita los campos:"}),e(E,{clienteTemporal:i,setClienteTemporal:d})]})]})},K=()=>s(f,{children:[e("h1",{className:"font-black text-4xl text-blue-900",children:"Nuevo Cliente"}),e("p",{className:"mt-5",children:"Rellena los siguientes campos para registrar un cliente:"}),e(E,{})]}),U=({cargando:t,setCargando:r})=>{const[i,d]=p.exports.useState({}),{id:a}=j();p.exports.useEffect(()=>{r(!t),(async()=>{try{const o=`https://my-json-server.typicode.com/ricardocredondo/04-crm/clientes/${a}`,S=await(await fetch(o)).json();d(S)}catch(o){console.log(o)}r(!1)})()},[]);const{nombre:n,empresa:l,email:m,telefono:h,notas:u}=i;return e("div",{children:t?e(w,{}):Object.keys(i).length===0?e(k,{}):s("table",{className:"w-full mt-10 table-auto shadow bg-white",children:[e("thead",{className:"bg-blue-800 text-white",children:s("tr",{children:[e("th",{className:"p-2",children:"Nombre"}),e("th",{className:"p-2",children:"Empresa"}),e("th",{className:"p-2",children:"Telefono"}),e("th",{className:"p-2",children:"Email"}),e("th",{className:"p-2",children:"Notas"})]})}),e("tbody",{children:s("tr",{className:"text-center border-b hover:bg-gray-100",children:[e("td",{className:"py-8 text-gray-500",children:n}),e("td",{className:"py-8 text-gray-500",children:l}),e("td",{className:"py-8 text-gray-500",children:h}),e("td",{className:"py-8 text-gray-500",children:m}),e("td",{className:"py-8 text-gray-500",children:u})]})})]})})};function H(){const[t,r]=p.exports.useState(!1);return console.log("https://my-json-server.typicode.com/ricardocredondo/04-crm/clientes"),e(R,{children:e(P,{children:s(y,{path:"/clientes",element:e(B,{}),children:[e(y,{index:!0,element:e(J,{cargando:t,setCargando:r})}),e(y,{path:"nuevo",element:e(K,{})}),e(y,{path:"editar/:id",element:e(G,{cargando:t,setCargando:r})}),e(y,{path:":id",element:e(U,{cargando:t,setCargando:r})})]})})})}D.render(e(M.StrictMode,{children:e(H,{})}),document.getElementById("root"));
